<!--
  ~ Copyright (c) 2025 Florian Hehlen & Ã“scar Otero
  ~ All rights reserved.
  -->

<idea-plugin>
    <id>org.js.vento.plugin</id>

    <name>Vento JS Support</name>
    <description><![CDATA[
        Provides support for the <a href="https://vento.js.org/">VentoJs</a> template engine.
        The support includes:
        <ul>
            <li>syntax highlighting</li>
            <li>syntax checking</li>
        </ul>
        For more information visit the
        <a href="https://example.com">project site</a>.
        ]]></description>

    <change-notes><![CDATA[
        <h1>v 0.1.0</h1>
        <h2>New Features</h2>
        <ul>
            <li>Comment Block Highlighting</li>
            <li>JavaScript Block Highlighting</li>
            <li>HTML Highlighting</li>
        </ul>
        <h2>Bug Fixes</h2>
        <ul>
        </ul>
        ]]></change-notes>


    <vendor url="https://github.com/ventojs">
        ventojs
    </vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.json</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.xml</depends>
    <depends>JavaScript</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File Type Registration -->
        <!-- Registers .vto files as Vento template files -->
        <fileType name="Vento File"
                  implementationClass="org.js.vento.plugin.filetype.VentoFileType"
                  fieldName="INSTANCE"
                  language="Vento"
                  extensions="vto"/>

        <!-- Parser Definition -->
        <!-- Defines how Vento files should be parsed into a PSI tree -->
        <lang.parserDefinition language="Vento" implementationClass="org.js.vento.plugin.parser.VentoParserDefinition"/>

        <!-- Syntax Highlighting -->
        <!-- Provides syntax highlighting capabilities for Vento files -->
        <lang.syntaxHighlighterFactory language="Vento"
                                       implementationClass="org.js.vento.plugin.highlighting.VentoSyntaxHighlighterFactory"/>
        <!-- Adds color settings page to customize syntax highlighting -->
        <colorSettingsPage implementation="org.js.vento.plugin.highlighting.VentoColorSettingsPage"/>

        <!-- Language Injection -->
        <!-- Injects JavaScript language support into Vento JavaScript blocks -->
        <multiHostInjector implementation="org.js.vento.plugin.parser.injectors.VentoContextualJavaScriptInjector"/>
        <!-- Injects HTML language support into Vento template content -->
        <multiHostInjector implementation="org.js.vento.plugin.parser.injectors.VentoHtmlInjector"/>

        <!-- Code Analysis -->
        <!-- Provides code analysis and error highlighting for Vento files -->
        <annotator language="Vento" implementationClass="org.js.vento.plugin.highlighting.VentoAnnotator"/>

    </extensions>

    <actions>
        <action id="VentoToggleCommentAction"
                class="org.js.vento.plugin.actions.VentoToggleCommentAction"
                text="Toggle Vento Comment"
                description="Toggle Vento comment markers ({{# #}}) around selection">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl SLASH"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta SLASH"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta SLASH"/>
        </action>
    </actions>
</idea-plugin>
